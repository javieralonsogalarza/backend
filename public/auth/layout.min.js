try{window.addEventListener("submit",(function(e){const form=e.target;if("multipart/form-data"===form.getAttribute("enctype")&&form.dataset.ajax){e.preventDefault(),e.stopImmediatePropagation(),$(form).find("input[type=text]").each((function(){this.inputmask&&this.inputmask._valueSet(this.inputmask.unmaskedvalue(),!0)}));const xhr=new XMLHttpRequest;xhr.open(form.method,form.action),xhr.addEventListener("loadend",(function(){null!==form.getAttribute("data-ajax-loading")&&""!==form.getAttribute("data-ajax-loading")&&(document.getElementById(form.getAttribute("data-ajax-loading").substr(1)).style.display="none"),null!==form.getAttribute("data-ajax-complete")&&""!==form.getAttribute("data-ajax-complete")&&window[form.getAttribute("data-ajax-complete")].apply(this,[])})),xhr.onreadystatechange=function(){4===xhr.readyState&&(200===xhr.status?window[form.getAttribute("data-ajax-success")].apply(this,[JSON.parse(xhr.responseText)]):window[form.getAttribute("data-ajax-failure")].apply(this,[xhr.status]))};const confirm=form.getAttribute("data-ajax-confirm");confirm?Swal.fire({icon:"question",title:"Confirmacion",text:confirm,type:"warning",confirmButtonColor:"#d33",confirmButtonText:"Si, Confirmar",cancelButtonText:"Cancelar",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0}).then(result=>{result.isConfirmed&&(null!==form.getAttribute("data-ajax-begin")&&""!==form.getAttribute("data-ajax-begin")&&window[form.getAttribute("data-ajax-begin")].apply(this,[]),xhr.send(new FormData(form)))}):(null!==form.getAttribute("data-ajax-loading")&&""!==form.getAttribute("data-ajax-loading")&&(document.getElementById(form.getAttribute("data-ajax-loading").substr(1)).style.display="block"),null!==form.getAttribute("data-ajax-begin")&&""!==form.getAttribute("data-ajax-begin")&&window[form.getAttribute("data-ajax-begin")].apply(this,[]),xhr.send(new FormData(form)))}}),!0)}catch(err){console.log(err)}function createModal(title,body,onHidden){const template=`<div id="myModal" class="modal fade" role="dialog">\n                      <div class="modal-dialog">\n                        <div class="modal-content">\n                          <div class="modal-header">\n                            <button type="button" class="close" data-dismiss="modal">&times;</button>\n                            <h4 class="modal-title">${title}</h4>\n                          </div>\n                          <div class="modal-body">\n                            ${body}\n                          </div>\n                          <div class="modal-footer">\n                            <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>\n                          </div>\n                        </div>\n                      </div>\n                    </div>`,$modal=$(template);$modal.on("hidden.bs.modal",(function(){$modal.remove(),onHidden&&onHidden()})),$modal.modal("show")}function getDate(){const now=new Date,primerDia=new Date(now.getFullYear(),now.getMonth(),1),ultimoDia=new Date(now.getFullYear(),now.getMonth()+1,0);return{Now:now,FirstDay:primerDia,LastDay:ultimoDia}}function isNumberKey(evt){var charCode=evt.which?evt.which:event.keyCode;return!(charCode>31&&(charCode<48||charCode>57))}function getFormatDate(date){const array=date.split("/"),f=new Date(array[2],array[1]-1,array[0]);return f.format("yyyy-mm-dd")}function removeAccents(data){return data.replace(/έ/g,"ε").replace(/ύ/g,"υ").replace(/ό/g,"ο").replace(/ώ/g,"ω").replace(/ά/g,"α").replace(/ί/g,"ι").replace(/ή/g,"η").replace(/\n/g," ").replace(/[çÇ]/g,"c").replace(/[Ãã]/g,"a").replace(/[Ẽẽ]/g,"e").replace(/[ĨĨ]/g,"i").replace(/[Õõ]/g,"o").replace(/[Ũũ]/g,"u").replace(/[áÁ]/g,"a").replace(/[éÉ]/g,"e").replace(/[íÍ]/g,"i").replace(/[óÓ]/g,"o").replace(/[úÚ]/g,"u").replace(/[äÄ]/g,"a").replace(/[ëË]/g,"e").replace(/[ïÏ]/g,"i").replace(/[öÖ]/g,"o").replace(/[üÜ]/g,"u").replace(/[àÀ]/g,"a").replace(/[èÈ]/g,"e").replace(/[ìÌ]/g,"i").replace(/[òÒ]/g,"o").replace(/[ùÙ]/g,"u").replace(/[âÂ]/g,"a").replace(/[êÊ]/g,"e").replace(/[îÎ]/g,"i").replace(/[ôÔ]/g,"o").replace(/[ûÛ]/g,"u").replace(/[Şş]/g,"s").replace(/ß/g,"ss")}moment.locale("es"),$((function(){$(document).on("shown.bs.modal",".modal",(function(event){var zIndex=1040+10*$(".modal:visible").length;$(this).css("z-index",zIndex),setTimeout((function(){$(".modal-backdrop").not(".modal-stack").css("z-index",zIndex-1).addClass("modal-stack")}),0),$("body").css("overflow","hidden")})),$(document).on("hidden.bs.modal",".modal",(function(event){0===$(".modal.fade.show").length&&$("body").css("overflow","auto")})),$.ajaxSetup({cache:!1}),Toast=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})})),invocarVista=function(url,onHiddenView){$.ajax({url:url,type:"GET",dataType:"html",cache:!1,success:function(data){onHiddenView&&onHiddenView(data)},beforeSend:function(){$("#loading").show()},complete:function(){$("#loading").hide()}})},invocarModal=function(url,onHiddenModal){$.ajax({url:url,type:"GET",dataType:"html",cache:!1,success:function(data){const $modal=$("<div class='parent'>").append(data);$modal.find(">.modal").on("hidden.bs.modal",(function(){onHiddenModal&&onHiddenModal($(this)),$(this).parent().remove()})),$modal.find(">.modal").modal("show"),$("body").append($modal)},beforeSend:function(){$("#loading").show()},complete:function(){$("#loading").hide()}})},onSuccessForm=function(data,$form,$modal,onSucess,ResetForm){null!=$form&&$form.find("span[data-valmsg-for]").text(""),!0===data.Success?(ResetForm||$form.trigger("reset"),$modal&&$modal.attr("data-reload","true"),Toast.fire({icon:"success",title:null!=data.Message?data.Message:"Registro/Actualización guardado correctamente"}),$modal&&$modal.modal("hide"),onSucess&&onSucess(data)):(data.Errors&&$.each(data.Errors,(function(i,item){null!=$form&&0!==$form.find("span[data-valmsg-for="+i+"]").length&&$form.find("span[data-valmsg-for="+i+"]").text(item[0])})),Toast.fire({icon:"error",title:null!=data.Message?data.Message:"Algo salió mal, por favor verifique los campos ingresados."}))},onFailureForm=function(){Toast.fire({icon:"error",title:"Algo salió mal, hubo un error al guardar."})},showView=function($list,$frm,data){$list.addClass("hidden"),$frm.removeClass("hidden"),$frm.find(".container-fluid").html("").append(data)},resetView=function($list,$frm,$dataTable){$list.removeClass("hidden"),$frm.addClass("hidden"),$frm.find(".container-fluid").html(""),$dataTable&&$dataTable.ajax.reload(null,!1)},confirmAjax=function(url,parameters,type,msg,msgSuccess,onSuccess,onErrors){Swal.fire({icon:"question",title:"Confirmación",text:msg||"¿ Está seguro de realizar esta acción ?",type:"warning",confirmButtonColor:"#d33",confirmButtonText:"Si, Confirmar",cancelButtonText:"Cancelar",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0}).then(result=>{result.isConfirmed&&actionAjax(url,parameters,type,onSuccess,!0,msgSuccess,onErrors)})},actionAjax=function(url,parameters,type,onSuccess,isToConfirm,msgSuccess,onErrors){$.ajax({url:url,data:parameters,type:null!=type?type:"POST",cache:!1,processData:!1,contentType:!1,success:function(data){!0===isToConfirm?!0===data.Success?(Toast.fire({icon:"success",title:msgSuccess||"Proceso realizado Correctamente"}),onSuccess&&onSuccess(data)):onErrors?onErrors(data):Toast.fire({icon:"error",title:data.Message}):onSuccess&&onSuccess(data)},beforeSend:function(){$("#loading").show()},complete:function(){$("#loading").hide()}})},agregarCommaMillions=data=>{var str=data.toString().split(".");return str[0].length>=4&&(str[0]=str[0].replace(/(\d)(?=(\d{3})+$)/g,"$1,")),str.join(".")},readImage=function(input,img){if(input.files&&input.files[0]){const reader=new FileReader;reader.onload=function(e){img.attr("src",e.target.result)},reader.readAsDataURL(input.files[0])}else img.attr("src","/upload/image/default.png")},cascadingDropDownLoad=function($dropDown,urlRequest,parameters,selected,onComplete){actionAjax(urlRequest,parameters,"GET",(function(data){data.data&&($dropDown.html(""),$dropDown.append('<option value="">Ninguno</option>'),$.each(data.data,(function(i,e){var max=Math.max.apply(Math,data.data.map((function(o){return o.id})));$dropDown.append(`<option value="${e.id}" ${selected&&max===e.id?"selected":""}>${e.nombre}</option>`)})),onComplete&&onComplete())}))},$.fn.DataTable.ext.type.search.string=function(data){return data?"string"==typeof data?data.replace(/έ/g,"ε").replace(/ύ/g,"υ").replace(/ό/g,"ο").replace(/ώ/g,"ω").replace(/ά/g,"α").replace(/ί/g,"ι").replace(/ή/g,"η").replace(/\n/g," ").replace(/[áÁ]/g,"a").replace(/[éÉ]/g,"e").replace(/[íÍ]/g,"i").replace(/[óÓ]/g,"o").replace(/[úÚ]/g,"u").replace(/ê/g,"e").replace(/î/g,"i").replace(/ô/g,"o").replace(/è/g,"e").replace(/ï/g,"i").replace(/ü/g,"u").replace(/ã/g,"a").replace(/õ/g,"o").replace(/ç/g,"c").replace(/ì/g,"i"):data:""},$(document).on("select2:open",()=>{document.querySelector(".select2-search__field").focus()});