$((function(){const $viewName=getData().ViewName,$btnRegistrar=$(`#btnRegistrar${$viewName.charAt(0).toUpperCase()+$viewName.slice(1)}`),$host=window.location.href,$list_cards_content=$("#list-cards-content"),$body=$("body"),$reportrange=$("#reportrange"),$nombre_filter=$("#nombre_filter");let $startDate=moment().subtract(1,"month").startOf("year").format("YYYY-MM-DD"),$endDate=moment().subtract(1,"month").endOf("year").format("YYYY-MM-DD");function listPagination(reset){const $Page=reset?$host+"/?page=1":$list_cards_content.data("next-page"),$Filters=`nombre=${$nombre_filter.val()}&fecha_inicio=${$startDate}&fecha_final=${$endDate}`;null!=$Page?(console.log("loading.."),$.get($Page+"&"+$Filters,(function(data){$list_cards_content.html("").append(data.lists),$list_cards_content.data("next-page",data.next_page)})).always((function(){console.log("finish..")}))):(clearTimeout($.data(this,"scrollCheck")),$.data(this,"scrollCheck",setTimeout((function(){$.data(this,"scrollCheck",setTimeout((function(){var scroll_postion_for_load;$(window).height()+$(window).scrollTop()+100>=$(document).height()&&null!=$Page&&(console.log("loading2.."),$.get($Page+"&"+$Filters,(function(data){$list_cards_content.append(data.lists),$list_cards_content.data("next-page",data.next_page)})).done((function(){console.log("finish2..")})))})))}),350)))}function cb(start,end){$reportrange.find("span").html(start.format("MMMM D, YYYY")+" - "+end.format("MMMM D, YYYY")),$startDate=moment($reportrange.data("daterangepicker").startDate._d).format("YYYY-MM-DD"),$endDate=moment($reportrange.data("daterangepicker").endDate._d).format("YYYY-MM-DD"),listPagination(!0)}$(window).scroll((function(){listPagination(!1)})),listPagination(!0),$nombre_filter.on("keyup",(function(){listPagination(!0)})),$reportrange.daterangepicker({autoUpdateInput:!1,startDate:moment().subtract(1,"month").startOf("year"),endDate:moment().subtract(1,"month").endOf("year"),ranges:{Hoy:[moment(),moment()],Ayer:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Últimos 7 días":[moment().subtract(6,"days"),moment()],"Últimos 30 días":[moment().subtract(29,"days"),moment()],"Este Mes":[moment().startOf("month"),moment().endOf("month")],"Mes Anterior":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],"Todo el Año":[moment().subtract(1,"month").startOf("year"),moment().subtract(1,"month").endOf("year")]}},cb),cb(moment().subtract(1,"month").startOf("year"),moment().subtract(1,"month").endOf("year")),$body.on("click",".list-cards-content .card .btn-delete",(function(){const $this=$(this).closest(".card"),id=$this.attr("data-id"),nombre=$this.attr("data-info"),formData=new FormData;formData.append("_token",$("meta[name=csrf-token]").attr("content")),formData.append("id",id),confirmAjax(`/auth/${$viewName}/delete`,formData,"POST",`¿Está seguro de eliminar el registro ${nombre} ?`,null,(function(){listPagination(!0)}))})),$btnRegistrar.on("click",(function(){invocarModalView()})),$body.on("click",".list-cards-content .card .btn-update",(function(){const $this=$(this).closest(".card"),id=$this.attr("data-id");invocarModalView(id)})),invocarModalView=id=>{invocarModal(`/auth/${$viewName}/partialView/${id||0}`,(function($modal){"true"===$modal.attr("data-reload")&&listPagination(!0)}))}}));